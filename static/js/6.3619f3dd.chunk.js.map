{"version":3,"sources":["pages/signup/style.module.scss","pages/signup/index.tsx"],"names":["module","exports","SignUp","history","useHistory","firebase","React","useContext","FirebaseContext","useState","emailAddress","setEmailAddress","fullName","setFullName","username","setUserName","password","setPassword","error","setError","isSignUping","setIsSignUping","isInvalid","handleSignUp","e","a","preventDefault","doesUsernameExist","Error","auth","createUserWithEmailAndPassword","newUser","firestore","collection","add","userId","user","uid","toLowerCase","following","followers","dateCreated","Date","now","avatarUrl","push","ROUTES","DASHBOARD","message","useEffect","document","title","className","s","container","right","top","header","src","VALUES","LOGO","alt","text","or","btn","fullWidth","onSubmit","placeholder","onChange","target","value","input","id","autoComplete","type","disabled","isLoading","other","register","to","LOGIN"],"mappings":"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","file":"static/js/6.3619f3dd.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"style_container__1M7UB style_container__1VRkS\",\"right\":\"style_right__3_hWm style_right__2Ezkn\",\"top\":\"style_top__33-VI style_top__35xeA\",\"error\":\"style_error__2AeE8 style_error__1psBt\",\"header\":\"style_header__3znV6 style_header__3Bvgn\",\"input\":\"style_input__1U2rm style_input__1DrpM\",\"btn\":\"style_btn__3bEXx style_btn__RG3al\",\"or\":\"style_or__JbQG1 style_or__1OFC_\",\"other\":\"style_other__2pQ7Z style_other__3tqux\",\"register\":\"style_register__sX_hO style_register__2i9zp\",\"text\":\"style_text__1asKk\"};","import React from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport { Button, InputText } from '../../components';\nimport { ROUTES, VALUES } from '../../constants/routes';\nimport { FirebaseContext } from '../../context/firebase';\nimport { doesUsernameExist } from '../../services/firebase';\nimport s from './style.module.scss';\n\nconst SignUp = () => {\n  const history = useHistory();\n  const { firebase } = React.useContext(FirebaseContext);\n  const [emailAddress, setEmailAddress] = React.useState('');\n  const [fullName, setFullName] = React.useState('');\n  const [username, setUserName] = React.useState('');\n  const [password, setPassword] = React.useState('');\n  const [error, setError] = React.useState('');\n  const [isSignUping, setIsSignUping] = React.useState(false);\n\n  const isInvalid =\n    password === '' ||\n    emailAddress === '' ||\n    fullName === '' ||\n    username === '';\n\n  const handleSignUp = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    if (isInvalid) return;\n    setIsSignUping(true);\n    try {\n      const userNameExists = await doesUsernameExist(username);\n      if (userNameExists) {\n        throw Error('Username is already taken');\n      }\n      const newUser = await firebase\n        .auth()\n        .createUserWithEmailAndPassword(emailAddress, password);\n      await firebase.firestore().collection('users').add({\n        userId: newUser.user?.uid,\n        username: username.toLowerCase(),\n        fullName,\n        emailAddress: emailAddress.toLowerCase(),\n        following: [],\n        followers: [],\n        dateCreated: Date.now(),\n        avatarUrl: null,\n      });\n      setIsSignUping(false);\n      history.push(ROUTES.DASHBOARD);\n    } catch (err) {\n      setIsSignUping(false);\n      setError(err.message);\n      setEmailAddress('');\n      setPassword('');\n      setFullName('');\n      setUserName('');\n    }\n  };\n\n  React.useEffect(() => {\n    document.title = 'SignUp';\n  }, []);\n\n  return (\n    <div className={s.container}>\n      <div className={s.right}>\n        <div className={s.top}>\n          <h1 className={s.header}>\n            <img src={`${VALUES.LOGO}`} alt=\"Logo\" />\n          </h1>\n          <p className={s.text}>\n            Sign up to see photos and videos from your friends.{' '}\n          </p>\n          <div className={s.or}>OR</div>\n          <Button className={s.btn} fullWidth>\n            Login with google\n          </Button>\n          {error && <p className={s.error}>{error}</p>}\n          <form onSubmit={handleSignUp}>\n            <InputText\n              placeholder=\"email\"\n              onChange={(e) => setEmailAddress(e.target.value)}\n              value={emailAddress}\n              className={s.input}\n              id=\"email\"\n              autoComplete=\"on\"\n            />\n            <InputText\n              placeholder=\"fullname\"\n              onChange={(e) => setFullName(e.target.value)}\n              value={fullName}\n              className={s.input}\n              id=\"fullname\"\n              autoComplete=\"on\"\n            />\n            <InputText\n              placeholder=\"username\"\n              onChange={(e) => setUserName(e.target.value)}\n              value={username}\n              className={s.input}\n              id=\"username\"\n              autoComplete=\"on\"\n            />\n            <InputText\n              placeholder=\"password\"\n              onChange={(e) => setPassword(e.target.value)}\n              value={password}\n              className={s.input}\n              type=\"password\"\n              autoComplete=\"off\"\n            />\n            <Button\n              type=\"submit\"\n              disabled={isInvalid || isSignUping}\n              fullWidth\n              className={s.btn}\n              isLoading={isSignUping}\n            >\n              Sign up\n            </Button>\n            <div className={s.other}></div>\n          </form>\n        </div>\n        <div className={s.register}>\n          <p>\n            Have an account? <Link to={ROUTES.LOGIN}>Log In</Link>\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SignUp;\n"],"sourceRoot":""}